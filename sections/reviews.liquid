{% style %}
  .section-{{ section.id }} {
      padding: 80px 0 64px;
      background-color: #111111;
  }

  .section-{{ section.id }} .home-reviews {
      background-color: #111111;
      max-width: 1280px;
      margin: auto;
      margin-bottom: 64px;
  }

  .section-{{ section.id }} .home-reviews h2 {
      color: #f9f9f7;
      max-width: 900px;
      font-family: "Sen";
      font-weight: 600;
      font-size: 48px;
      text-align: center;
      margin: auto;
      padding: 0 16px;
      line-height: 130%;
  }

  .section-{{ section.id }} .menu-swiper {
      position: relative;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.6s ease;
      overflow-x: hidden;
  }

  .section-{{ section.id }} .menu-swiper.swiper-initialized {
      visibility: visible;
      opacity: 1;
  }

  .section-{{ section.id }} .menu-swiper .swiper-slide {
      opacity: 0.5;
      transform: scale(0.8);
      transition: all 0.3s ease;
      cursor: grab;
  }

  .section-{{ section.id }} .menu-swiper .swiper-slide.swiper-slide-active {
      opacity: 0.95;
      transform: scale(1);
      cursor: pointer;
  }

  .section-{{ section.id }} .menu-swiper .swiper-slide:not(.swiper-slide-active) a {
      pointer-events: none;
  }

  .section-{{ section.id }} .menu-swiper .swiper-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
  }

  .section-{{ section.id }} figure.menu-card {
      background-color: #262626;
      color: #fff;
      font-size: 16px;
      text-align: left;
      position: relative;
      overflow: hidden;
      opacity: 0.95;
      margin: 0;
      border: 1px solid rgba(255, 255, 255, 0.10);
      border-radius: 16px;
      background: linear-gradient(0deg, rgba(255, 255, 255, 0.01) 0%, rgba(255, 255, 255, 0.01) 100%), #111;
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.10);
      padding: 48px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 96px;
  }

  .section-{{ section.id }} figure.menu-card h4 {
      font-family: "Sen";
      font-weight: 600;
      font-size: 22px;
      margin-bottom: 24px;
      line-height: 140%;
  }

  .section-{{ section.id }} figure.menu-card p {
      font-family: "Albert Sans";
      font-weight: 400;
      font-size: 18px;
      color: #86868b;
      margin: 0;
  }

  .section-{{ section.id }} figure.menu-card .menu-card-bottom {
      width: 100%;
  }

  .section-{{ section.id }} figure.menu-card .menu-card-bottom * {
      text-align: end;
  }

  .section-{{ section.id }} figure.menu-card span {
      font-family: "Albert Sans";
      font-weight: 400;
      font-size: 18px;
      color: #f9f9f7;
      display: block;
  }

  .section-{{ section.id }} .menu-swiper .swiper-pagination {
      position: static;
      padding-top: 64px;
      font-size: 16px;
      color: white;
      margin: 0;
  }

  .section-{{ section.id }} .menu-swiper .swiper-pagination span {
      background: #c1c4c7;
  }

  @media screen and (max-width: 750px) {
      .section-{{ section.id }} {
          padding: 48px 0 40px;
      }

      .section-{{ section.id }} .home-reviews h2 {
          font-size: 28px;
      }

      .section-{{ section.id }} figure.menu-card {
            height:408px;
            width:313px;
      }

      .section-{{ section.id }} .home-reviews {
            margin-bottom: 48px;
     }

      .section-{{ section.id }} .menu-swiper .swiper-pagination {
          padding-top: 32px;
      }

      .section-{{ section.id }} figure.menu-card {
          padding: 24px;
          gap: 80px;
      }

      .section-{{ section.id }} figure.menu-card h4 {
            font-size: 19px;
            margin-bottom: 12px;
            color: var(--Accent, #C1C4C7);
            /* Mobile/H4 */
            font-family: var(--Primary-Font-Family-Heading, Sen);
            font-size: var(--Mobile-Font-Size-H4, 19px);
            font-style: normal;
            font-weight: var(--Primary-Font-Weight-Semibold, 600);
            line-height: 140%; /* 26.6px */
      }

      .section-{{ section.id }} figure.menu-card p {
            max-height: 130px;
            overflow: hidden;
            color: var(--Text, #86868B);
            text-overflow: ellipsis;
            /* Mobile/Text Large */
            font-family: var(--Primary-Font-Family-Body, "Albert Sans");
            font-size: var(--Mobile-Font-Size-Text-Large, 18px);
            font-style: normal;
            font-weight: var(--Primary-Font-Weight-Regular, 400);
            line-height: 150%; /* 27px */
      }

      .section-{{ section.id }} figure.menu-card .menu-cart-top p {
          font-size: 18px;
      }
  }
{% endstyle %}

<section class="section-{{ section.id }}">
  <div class="home-reviews">
    <h2>{{ section.settings.heading }}</h2>
  </div>
  <div class="menu-swiper swiper-container">
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        <div class="swiper-slide">
          <figure class="menu-card">
            <div class="menu-card-top">
              <h4>{{ block.settings.heading }}</h4>
              <p>{{ block.settings.content }}</p>
            </div>
            <div class="menu-card-bottom">
              <span>{{ block.settings.customer }}</span>
              <p>{{ block.settings.location }}</p>
            </div>
          </figure>
        </div>
      {% endfor %}
    </div>
    <div class="swiper-pagination"></div>
  </div>
</section>

<script>
  function initMenuSwipers() {
    const sliders = document.querySelectorAll('.menu-swiper');

    if (!sliders.length) return; // Exit if none found

    sliders.forEach((sliderEl) => {
      // Prevent double-init
      if (sliderEl.classList.contains('swiper-initialized')) return;

      const swiperInstance = new Swiper(sliderEl, {
        slidesPerView: 1.3,
        centeredSlides: true,
        loop: false,
        grabCursor: true,
        pagination: {
          el: sliderEl.querySelector('.swiper-pagination'),
          type: 'bullets',
          clickable: 'true',
        },
      });

      // Click-to-activate and follow link
      sliderEl.querySelectorAll('.swiper-slide').forEach((slide, index) => {
        slide.addEventListener('click', (e) => {
          const isActive = slide.classList.contains('swiper-slide-active');
          const link = slide.querySelector('a');

          if (!isActive) {
            e.preventDefault();
            swiperInstance.slideTo(index);
          } else if (link) {
            window.location.href = link.href;
          }
        });
      });
    });
  }
  initMenuSwipers();
</script>

{% schema %}
{
  "name": "Reviews",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    }
  ],
  "blocks": [
    {
      "type": "block",
      "name": "Review",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        },
        {
          "type": "text",
          "id": "customer",
          "label": "Customer"
        },
        {
          "type": "text",
          "id": "location",
          "label": "Location"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Reviews"
    }
  ]
}
{% endschema %}
