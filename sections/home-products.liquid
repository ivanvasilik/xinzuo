{% style %}

{% endstyle %}

<div class="section-{{ section.id }}">
    <div class="home-products">
        <h2>{{ section.settings.heading }}</h2>
        <div class="home-grid" id="home-products">
            {% assign counter = 0 %}
            {% for product in collections.all.products %}
                {% assign counter = counter | plus: 1 %}
                <div class="product-item" {% if counter > 4 %}style="display:none"{% endif %}>
                    {{ product.title }}
                </div>
            {% endfor %}
        </div>
        <button id="load-more" data-page="1">Load more</button>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const btn = document.querySelector('#load-more');
        const products = document.querySelectorAll('#home-products .product-item');
        let visible = 4; // initially visible products

        btn.addEventListener('click', () => {
            // Show next 4 products
            for (let i = visible; i < visible + 4; i++) {
            if (products[i]) products[i].style.display = 'block';
            }

            visible += 4;

            // Remove button if all products are visible
            if (visible >= products.length) btn.remove();
        });
    });
</script>

{% schema %}
{
    "name": "Home Products",
    "settings": [
        {
            "type": "text",
            "id": "heading",
            "label": "Heading"
        }
    ],
    "presets": [
        {
            "name": "Home Products"
        }
    ]
}
{% endschema %}