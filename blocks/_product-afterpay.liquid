{%- liquid
  assign product = closest.product
  assign block_settings = block.settings
-%}

{% if product.price > 0 %}
  {% assign installment_amount = product.price | divided_by: 4.0 %}
  <div class="product-afterpay-custom" {{ block.shopify_attributes }}>
    <span class="afterpay-text">or 4 interest-free payments of {{ installment_amount | money }} with</span>
    <img 
      src="https://cdn.shopify.com/s/files/1/0668/0441/6563/files/afterpay-logo.webp?v=1763090600" 
      alt="Afterpay" 
      class="afterpay-logo"
      width="64"
      height="13"
      loading="lazy"
    >
  </div>
{% endif %}

{% stylesheet %}
  .product-afterpay-custom {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
  }

  .afterpay-text {
    font-family: "Albert Sans";
    font-size: 12px;
    font-weight: 400;
    color: #c9c9cc;
    line-height: 1.4;
  }

  .afterpay-logo {
    width: 64px;
    height: auto;
    display: inline-block;
    vertical-align: middle;
  }

  @media screen and (min-width: 750px) {
    .afterpay-text {
      font-size: 13px;
    }

    .afterpay-logo {
      width: 70px;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Product Afterpay",
  "tag": null,
  "settings": []
}
{% endschema %}