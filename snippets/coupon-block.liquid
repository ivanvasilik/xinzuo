{%- comment -%}
Minimal coupon snippet: white text, dotted pill, icon-only copy button.
Render example:
{% render 'coupon-block',
  code: 'BF20',
  text: 'Use this coupon for 20% off at checkout.',
  color: '#e60013',
  margin_top: 12,
  margin_bottom: 0
%}
{%- endcomment -%}

{%- assign code = code | default: 'XINZUO20' -%}
{%- assign text = text | default: 'Use this coupon for 20% off at checkout.' -%}
{%- assign color = color | default: '#e60013' -%}
{%- assign mt = margin_top | default: 12 -%}
{%- assign mb = margin_bottom | default: 0 -%}

<div class="coupon-block coupon--minimal" style="--c: {{ color }}; margin: {{ mt }}px 0 {{ mb }}px;">
  <div class="coupon-line">
    <strong class="coupon-code" aria-label="Coupon code">{{ code }}</strong>
    <button class="coupon-copy" type="button" aria-label="Copy code" data-copy="{{ code }}">
      <!-- copy icon -->
      <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path d="M16 3H8a2 2 0 0 0-2 2v10h2V5h8V3zm3 4H10a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zm0 12H10V9h9v10z" fill="currentColor"/>
      </svg>
      <span class="sr-only">Copy</span>
    </button>
  </div>
  <p class="coupon-text">{{ text }}</p>
</div>

<style>
  /* container */
  .coupon--minimal{
    background: transparent;
  }

  /* one-line pill */
  .coupon-line{
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: .75rem;
    padding: .6rem .8rem;
    border: 1.5px dotted var(--c);
    border-radius: 999px;
  }

  /* white code text */
  .coupon-code{
    font-family: var(--font-heading--family, inherit);
    font-weight: 700;
    letter-spacing: .08em;
    color: #fff;
    font-size: clamp(1rem, 2.2vw, 1.125rem);
  }

  /* circular dotted copy icon */
  .coupon-copy{
    display: inline-grid;
    place-items: center;
    width: 36px; height: 36px;
    border-radius: 999px;
    border: 1.5px dotted var(--c);
    background: transparent;
    color: #fff;
    cursor: pointer;
  }
  .coupon-copy:focus{ outline: 2px solid rgba(255,255,255,.25); outline-offset: 2px; }
  .coupon-copy:active{ transform: translateY(1px); }

  /* subtext */
  .coupon-text{
    margin: .5rem 0 0;
    font-size: .95rem;
    color: #c9c9cc;
  }

  /* mobile tightness */
  @media (max-width: 640px){
    .coupon-line{ padding: .55rem .7rem; }
    .coupon-copy{ width: 34px; height: 34px; }
  }

  /* screen reader helper */
  .sr-only{
    position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
  }
</style>

<script>
  document.addEventListener('click', function(e){
    const btn = e.target.closest('.coupon-block .coupon-copy');
    if(!btn) return;
    const code = btn.getAttribu
