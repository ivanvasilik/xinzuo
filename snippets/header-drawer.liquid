{%- doc -%}
  Renders a header drawer menu triggered by the top details element.

  @param {object} linklist - The linklist to render
  @param {string} [class] - Additional classes to add to the drawer
  @param {string} [data_header_drawer_type] - The type of header drawer to render
  @param {object} [block] - The block that can be used to provide settings
  @param {object} [section] - The section that can be used to provide settings

  @example
  {% render 'header-drawer', linklist: section.settings.menu, class: 'header-drawer--mobile' %}
{%- enddoc -%}

{% liquid
  assign block_settings = block.settings
  assign max_featured_items = 4
  assign image_border_radius = block_settings.image_border_radius

  if block_settings.menu_style == 'featured_collections'
    assign ratio = block_settings.featured_collections_aspect_ratio
  elsif block_settings.menu_style == 'featured_products'
    assign ratio = block_settings.featured_products_aspect_ratio
  endif

  ##
  # We only eager load heavy elements of the page when rendering this template
  # through the Section Rendering API.
  #
  # This keeps the initial render lightweight, minimizing the impact on TTFB.
  # The second render then refreshes the page with additional content.
  #
  # At the moment, we check if the Section Rendering API is being used by
  # checking if section.index is blank.
  assign eager_loading = false
  if section.index == blank
    assign eager_loading = true
  endif
%}

{% style %}
    .header-drawer-button {
    color: white;
    text-align: center;
    padding: 5px 20px;
    border: 1px solid #828282;
    background-color: #181818;
    width: 87%;
    font-family: "Sen";
    font-weight:500;
    font-size:14px;
    cursor: pointer;
    border-radius:5px;
    margin-left: auto;
    margin-right: auto;

  }
{% endstyle %}

<script
  src="{{ 'header-drawer.js' | asset_url }}"
  type="module"
  fetchpriority="low"
></script>

<header-drawer
  class="header-drawer {{ class }}"
  style="--menu-image-border-radius: {{ image_border_radius }}px; --resource-card-corner-radius: {{ image_border_radius }}px;"
>
  <details
    id="Details-menu-drawer-container"
    data-skip-node-update="true"
    class="menu-drawer-container"
    ref="details"
    scroll-lock
  >
    <summary
      class="header__icon header__icon--menu header__icon--summary"
      aria-label="{{ 'accessibility.menu' | t }}"
      on:click="/toggle"
    >
      <span class="svg-wrapper header-drawer-icon header-drawer-icon--open">
        <img src="{{ 'menu-list.svg?v=1760486892' | file_url }}" width="100%" height="100%" alt="Menu List">
      </span>
      <span class="svg-wrapper header-drawer-icon header-drawer-icon--close">
        {{- 'icon-close.svg' | inline_asset_content -}}
      </span>
    </summary>
    <div
      data-header-drawer
      class="
        menu-drawer
        motion-reduce
        color-{{ block_settings.color_scheme }}
      "
    >
      <div class="header-drawer-header">
        <span class="header-drawer-close" on:click="/close">
          <button
            class="button button-unstyled close-button menu-drawer__close-button"
            type="button"
            aria-label="{{ 'actions.close' | t }}"
          >
            <span class="svg-wrapper header-drawer-icon header-drawer-icon--close">
              {{- 'icon-close.svg' | inline_asset_content -}}
            </span>
          </button>
          <span>CLOSE</span>
        </span>
        <span class="header-drawer-action">
          {% comment %} {% render 'cart-drawer' %} {% endcomment %}
          {% render 'search', style: 'default', class: 'custom-class' %}
        </span>
      </div>
      <nav
        class="menu-drawer__navigation"
        style="
          {%- render 'menu-font-styles', settings: block_settings, menu_type: 'drawer' %}
          {%- render 'submenu-font-styles', settings: block_settings %}
        "
      >
        <ul
          class="menu-drawer__menu has-submenu"
          role="list"
        >
          {% assign animation_index = 0 %}
          {%- for link in linklist.links -%}
            {% if link.title != "Logo" %}
              {% assign animation_index = animation_index | plus: 1 %}
              <a class="header-drawer-button" href="/collections/all-products" >SHOP ALL</a>
              <li class="header-category-li" {% if link.title == "BEST SELLERS" %}id="header_drawer_padding" style="padding-top: 20px"{% endif %}>
                {% if link.links != blank %}
                  <div class="header-category" onclick="headerCategoryOpen({{ forloop.index }})">
                    <span>{{ link.title | escape }}</span>
                    <span>
                      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11 5.5L7 9.5L3 5.5" stroke="currentColor" stroke-width="var(--icon-stroke-width)" stroke-linecap="round" stroke-linejoin="round"></path>
                      </svg>
                    </span>
                  </div>
                  <div class="header-category-div open header-category-div-{{ forloop.index }}">
                    {% for sublink in link.links %}
                      {% comment %} Title overrides for navigation links {% endcomment %}
                      {% assign display_title = sublink.title %}
                      {% if sublink.title == "Wood Chopping" %}
                        {% assign display_title = "Chopping Boards" %}
                      {% endif %}
                      {% assign collection_handle = sublink.url | split: "/" | last %}
                      {% assign collection = collections[collection_handle] %}
                      <a href="{{ collection.url }}">
                        <div class="menu-img-mobile">
                          <img src="{{ collection.featured_image | img_url: 'master' }}" width="100%" height="100%" alt="collection-{{ collection.id }}">
                          {% assign sum = 0 %}
                          {% for product in collection.products %}
                            {% if product.compare_at_price and product.compare_at_price > product.price %}
                              {% assign discount = product.compare_at_price | minus: product.price %}
                              {% assign percent = discount | times: 100 | divided_by: product.compare_at_price %}
                              {% if sum < percent %}
                                {% assign sum = percent %}
                              {% endif %}
                            {% endif %}
                          {% endfor %}
                          {% if sum != 0 %}
                            <span class="price-off">{{ sum }}% OFF</span>
                          {% endif %}
                        </div>
                        <h4>{{ display_title }} ></h4>
                      </a>
                    {% endfor %}
                    {% if link.title == "KNIVES" %}
                      <a class="header-view-all" href="/collections/all-products?filter=knives">VIEW ALL KNIVES ></a>
                    {% endif %}
                    {% if link.title == "ACCESSORIES" %}
                      <a class="header-view-all" href="/collections/all-products?filter=accessories">VIEW ALL ACCESSORIES ></a>
                    {% endif %}
                  </div>
                {%- else -%}
                  <a
                    id="HeaderDrawer-{{ link.handle }}"
                    href="{{ link.url }}"
                    class="menu-drawer__menu-item menu-drawer__menu-item--mainlist menu-drawer__animated-element focus-inset{% if link.current %} menu-drawer__menu-item--active{% endif %}"
                    {% if link.current %}
                      aria-current="page"
                    {% endif %}
                  >
                    <span class="menu-drawer__menu-item-text wrap-text">{{ link.title | escape }}</span>
                  </a>
                {%- endif -%}
                {% comment %} {%- if link.links != blank -%}
                  <details
                    id="Details-menu-drawer-menu-item-{{ forloop.index }}"
                    class="menu-drawer__menu-container{% if block_settings.drawer_dividers %} menu-drawer__menu-container--divider{% endif %}"
                  >
                    <summary
                      id="HeaderDrawer-{{ link.handle }}"
                      class="menu-drawer__menu-item menu-drawer__menu-item--mainlist menu-drawer__animated-element focus-inset{% if link.child_active %} menu-drawer__menu-item--active{% endif %}"
                      on:click="header-drawer/open"
                    >
                      <span class="menu-drawer__menu-item-text wrap-text">{{ link.title | escape }}</span>
                      <span class="svg-wrapper icon-caret icon-caret--forward">
                        {{- 'icon-caret.svg' | inline_asset_content -}}
                      </span>
                    </summary>
                    <div
                      id="link-{{ link.handle | escape }}"
                      class="menu-drawer__submenu has-submenu gradient motion-reduce"
                      tabindex="-1"
                      style="--menu-drawer-animation-index: {{ animation_index }};"
                    >
                      <div class="menu-drawer__inner-submenu">
                        <div class="header-drawer-header">
                          <span class="header-drawer-close">
                            <button
                              class="button button-unstyled close-button menu-drawer__close-button"
                              type="button"
                              aria-label="{{ 'actions.close' | t }}"
                              on:click="/close"
                            >
                              <span class="svg-wrapper header-drawer-icon header-drawer-icon--close">
                                {{- 'icon-close.svg' | inline_asset_content -}}
                              </span>
                            </button>
                            <span>CLOSE</span>
                          </span>
                          <span class="header-drawer-action">
                            {% render 'search', style: 'default', class: 'custom-class' %}
                          </span>
                        </div>
                        <div class="menu-drawer__nav-buttons">
                          <button
                            class="button menu-drawer__back-button focus-inset"
                            aria-expanded="true"
                            on:click="header-drawer/back"
                            aria-label="{{ 'actions.back' | t }}"
                          >
                            <span class="menu-drawer__menu-item-text wrap-text">MENU</span>
                            <span style="margin: 0 10px;">
                              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <g clip-path="url(#clip0_4030_5767)">
                                  <path d="M6 3L11 8L6 13" stroke="#828282" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                  <path d="M6 3L11 8L6 13" stroke="black" stroke-opacity="0.2" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </g>
                                <defs>
                                  <clipPath id="clip0_4030_5767">
                                    <rect width="16" height="16" fill="white"/>
                                  </clipPath>
                                </defs>
                              </svg>
                            </span>
                            <span class="menu-drawer__menu-item-text wrap-text">{{ link.title | escape }}</span>
                          </button>
                        </div>
                        {% liquid
                          assign render_link_image = false
                          if block_settings.menu_style == 'collection_images'
                            assign catalog_links = link.links | where: 'type', 'catalog_link'
                            assign collection_list_links = link.links | where: 'type', 'collections_link'
                            assign collection_links = link.links | where: 'type', 'collection_link'
                            if catalog_links.size > 0 or collection_list_links.size > 0 or collection_links.size > 0
                              assign render_link_image = true
                            endif
                          endif
                        %}
                        <ul
                          class="menu-drawer__menu menu-drawer__menu--childlist{% if render_link_image and link.levels == 1 %} menu-drawer__menu--grid{% endif %}"
                          role="list"
                          tabindex="-1"
                        >
                          {% assign first_accordion_open = false -%}
                          {%- for childlink in link.links -%}
                            {% assign product_handle = childlink.url | split: "/" | last %}
                            {% assign product = all_products[product_handle] %}
                            {% assign collection_handle = childlink.url | split: "/" | last %}
                            {% assign collection = collections[collection_handle] %}
                            <li
                              class="
                                menu-drawer__list-item
                                {% if childlink.links != blank or product != blank or collection != blank -%}
                                  {% if block_settings.drawer_accordion -%} menu-drawer__list-item--deep{% else -%} menu-drawer__list-item--flat{%- endif -%}
                                {%- endif -%}
                                {% if block_settings.drawer_dividers %} menu-drawer__list-item--divider{% endif %}
                              "
                            >
                              {%- if childlink.links == blank -%}
                                {% if product == blank and collection == blank %}
                                  <a
                                    id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}"
                                    href="{{ childlink.url }}"
                                    class="menu-drawer__menu-item menu-drawer__menu-item--parent focus-inset{% if childlink.current %} menu-drawer__menu-item--active{% endif %}"
                                    {% if childlink.current %}
                                      aria-current="page"
                                    {% endif %}
                                  >
                                    {% if render_link_image and link.levels == 1 %}
                                      {% render 'link-featured-image',
                                        link: childlink,
                                        class: 'menu-drawer__link-image',
                                        sizes: 'auto, 400px'
                                      %}
                                    {% endif %}
                                    <span class="menu-drawer__menu-item-text wrap-text">
                                      {{- childlink.title | escape -}}
                                    </span>
                                  </a>
                                {% elsif collection == blank and product != blank %}
                                  {% liquid
                                    assign accordion_state = ''
                                    if first_accordion_open == false and block_settings.drawer_accordion and block_settings.drawer_accordion_expand_first
                                      assign first_accordion_open = true
                                      assign accordion_state = 'open'
                                    endif
                                  %}
                                  {% if block_settings.drawer_accordion %}
                                    {%- comment -%}
                                      Accordion for links with children, in menus with 3 levels of links
                                    {%- endcomment -%}
                                    <accordion-custom>
                                      <details
                                        id="Details-menu-drawer-{{ link.handle }}-{{ childlink.handle }}"
                                        {{ accordion_state }}
                                      >
                                        <summary
                                          id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}"
                                          class="menu-drawer__menu-item menu-drawer__menu-item--parent focus-inset"
                                        >
                                          <span class="menu-drawer__menu-item-text wrap-text">
                                            {{- childlink.title | escape -}}
                                          </span>
                                          <span class="svg-wrapper icon-plus">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                              <g clip-path="url(#clip0_4030_5779)">
                                                <path d="M19.5 9L12 16.5L4.5 9" stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M19.5 9L12 16.5L4.5 9" stroke="black" stroke-opacity="0.2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                              </g>
                                              <defs>
                                                <clipPath id="clip0_4030_5779">
                                                  <rect width="24" height="24" fill="white" transform="matrix(0 1 -1 0 24 0)"/>
                                                </clipPath>
                                              </defs>
                                            </svg>
                                          </span>
                                        </summary>
                                        {% comment %} {% liquid
                                          assign render_link_image = false
                                          if block_settings.menu_style == 'collection_images'
                                            assign catalog_links = childlink.links | where: 'type', 'catalog_link'
                                            assign collection_list_links = childlink.links | where: 'type', 'collections_link'
                                            assign collection_links = childlink.links | where: 'type', 'collection_link'
                                            if catalog_links.size > 0 or collection_list_links.size > 0 or collection_links.size > 0
                                              assign render_link_image = true
                                            endif
                                          endif
                                        %} {% endcomment %}
                                        {% if product.featured_image != blank %}
                                          <a href="{{ product.url }}">
                                            <img src="{{ product.featured_image | img_url: 'master' }}" width="100%" height="100%" alt="{{ product.title | escape }}" class="header-drawer-img">
                                          </a>
                                        {% endif %}
                                        <ul
                                          class="menu-drawer__menu menu-drawer__menu--grandchildlist details-content{% if render_link_image %} menu-drawer__menu--grid{% endif %}"
                                          role="list"
                                          tabindex="-1"
                                        >
                                          {%- for variant in product.variants -%}
                                            <li
                                              class="menu-drawer__list-item"
                                              style="--menu-drawer-animation-index: {{ forloop.index }};"
                                            >
                                              <a
                                                id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}-{{ variant.title }}"
                                                href="{{ variant.url }}"
                                                class="menu-drawer__menu-item menu-drawer__menu-item--child focus-inset{% if variant.current %} menu-drawer__menu-item--active{% endif %}"
                                                {% if variant.current %}
                                                  aria-current="page"
                                                {% endif %}
                                              >
                                                {% if render_link_image %}
                                                  {% render 'link-featured-image',
                                                    link: variant,
                                                    class: 'menu-drawer__link-image',
                                                    sizes: 'auto, 400px'
                                                  %}
                                                {% endif %}
                                                <span class="menu-drawer__menu-item-text wrap-text">
                                                  {{- variant.title | escape -}}
                                                </span>
                                              </a>
                                            </li>
                                          {%- endfor -%}
                                        </ul>
                                      </details>
                                    </accordion-custom>
                                  {% else %}
                                    {%- comment -%}
                                      Flat menus for links with children, in menus with 3 levels of links
                                    {%- endcomment -%}
                                    <a
                                      id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}"
                                      href="{{ childlink.url }}"
                                      class="menu-drawer__menu-item menu-drawer__menu-item--parent focus-inset{% if childlink.current %} menu-drawer__menu-item--active{% endif %}"
                                    >
                                      <span class="menu-drawer__menu-item-text wrap-text">
                                        {{- childlink.title | escape -}}
                                      </span>
                                    </a>
                                    {% liquid
                                      assign render_link_image = false
                                      if block_settings.menu_style == 'collection_images'
                                        assign catalog_links = childlink.links | where: 'type', 'catalog_link'
                                        assign collection_list_links = childlink.links | where: 'type', 'collections_link'
                                        assign collection_links = childlink.links | where: 'type', 'collection_link'
                                        if catalog_links.size > 0 or collection_list_links.size > 0 or collection_links.size > 0
                                          assign render_link_image = true
                                        endif
                                      endif
                                    %}
                                    <ul
                                      class="menu-drawer__menu menu-drawer__menu--grandchildlist details-content{% if render_link_image %} menu-drawer__menu--grid{% endif %}"
                                      role="list"
                                      tabindex="-1"
                                    >
                                      {%- for grandchildlink in childlink.links -%}
                                        <li
                                          class="menu-drawer__list-item"
                                          style="--menu-drawer-animation-index: {{ forloop.index }};"
                                        >
                                          <a
                                            id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}-{{ grandchildlink.handle }}"
                                            href="{{ grandchildlink.url }}"
                                            class="menu-drawer__menu-item menu-drawer__menu-item--child focus-inset{% if grandchildlink.current %} menu-drawer__menu-item--active{% endif %}"
                                            {% if grandchildlink.current %}
                                              aria-current="page"
                                            {% endif %}
                                          >
                                            {% if render_link_image %}
                                              {% render 'link-featured-image',
                                                link: grandchildlink,
                                                class: 'menu-drawer__link-image',
                                                sizes: 'auto, 400px'
                                              %}
                                            {% endif %}
                                            <span class="menu-drawer__menu-item-text wrap-text">
                                              {{- grandchildlink.title | escape -}}
                                            </span>
                                          </a>
                                        </li>
                                      {%- endfor -%}
                                    </ul>
                                  {%- endif -%}
                                {% elsif collection != blank and product == blank %}
                                  {% liquid
                                    assign accordion_state = ''
                                    if first_accordion_open == false and block_settings.drawer_accordion and block_settings.drawer_accordion_expand_first
                                      assign first_accordion_open = true
                                      assign accordion_state = 'open'
                                    endif
                                  %}
                                  {% if block_settings.drawer_accordion %}
                                    {%- comment -%}
                                      Accordion for links with children, in menus with 3 levels of links
                                    {%- endcomment -%}
                                    <accordion-custom>
                                      <details
                                        id="Details-menu-drawer-{{ link.handle }}-{{ childlink.handle }}"
                                        {{ accordion_state }}
                                      >
                                        <summary
                                          id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}"
                                          class="menu-drawer__menu-item menu-drawer__menu-item--parent focus-inset"
                                        >
                                          <span class="menu-drawer__menu-item-text wrap-text">
                                            {{- childlink.title | escape -}}
                                          </span>
                                          <span class="svg-wrapper icon-plus">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                              <g clip-path="url(#clip0_4030_5779)">
                                                <path d="M19.5 9L12 16.5L4.5 9" stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M19.5 9L12 16.5L4.5 9" stroke="black" stroke-opacity="0.2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                              </g>
                                              <defs>
                                                <clipPath id="clip0_4030_5779">
                                                  <rect width="24" height="24" fill="white" transform="matrix(0 1 -1 0 24 0)"/>
                                                </clipPath>
                                              </defs>
                                            </svg>
                                          </span>
                                        </summary>
                                        {% comment %} {% liquid
                                          assign render_link_image = false
                                          if block_settings.menu_style == 'collection_images'
                                            assign catalog_links = childlink.links | where: 'type', 'catalog_link'
                                            assign collection_list_links = childlink.links | where: 'type', 'collections_link'
                                            assign collection_links = childlink.links | where: 'type', 'collection_link'
                                            if catalog_links.size > 0 or collection_list_links.size > 0 or collection_links.size > 0
                                              assign render_link_image = true
                                            endif
                                          endif
                                        %} {% endcomment %}
                                        {% if collection.featured_image != blank %}
                                          <a href="{{ collection.url }}">
                                            <img src="{{ collection.featured_image | img_url: 'master' }}" width="100%" height="100%" alt="{{ collection.title | escape }}" class="header-drawer-img">
                                          </a>
                                        {% endif %}
                                        <ul
                                          class="menu-drawer__menu menu-drawer__menu--grandchildlist details-content{% if render_link_image %} menu-drawer__menu--grid{% endif %}"
                                          role="list"
                                          tabindex="-1"
                                        >
                                          {%- for product in collection.products -%}
                                            <li
                                              class="menu-drawer__list-item"
                                              style="--menu-drawer-animation-index: {{ forloop.index }};"
                                            >
                                              <a
                                                id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}-{{ product.title }}"
                                                href="{{ product.url }}"
                                                class="menu-drawer__menu-item menu-drawer__menu-item--child focus-inset{% if product.current %} menu-drawer__menu-item--active{% endif %}"
                                                {% if product.current %}
                                                  aria-current="page"
                                                {% endif %}
                                              >
                                                {% if render_link_image %}
                                                  {% render 'link-featured-image',
                                                    link: product,
                                                    class: 'menu-drawer__link-image',
                                                    sizes: 'auto, 400px'
                                                  %}
                                                {% endif %}
                                                <span class="menu-drawer__menu-item-text wrap-text">
                                                  {{- product.title | escape -}}
                                                </span>
                                              </a>
                                            </li>
                                          {%- endfor -%}
                                        </ul>
                                      </details>
                                    </accordion-custom>
                                  {% else %}
                                    {%- comment -%}
                                      Flat menus for links with children, in menus with 3 levels of links
                                    {%- endcomment -%}
                                    <a
                                      id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}"
                                      href="{{ childlink.url }}"
                                      class="menu-drawer__menu-item menu-drawer__menu-item--parent focus-inset{% if childlink.current %} menu-drawer__menu-item--active{% endif %}"
                                    >
                                      <span class="menu-drawer__menu-item-text wrap-text">
                                        {{- childlink.title | escape -}}
                                      </span>
                                    </a>
                                    {% liquid
                                      assign render_link_image = false
                                      if block_settings.menu_style == 'collection_images'
                                        assign catalog_links = childlink.links | where: 'type', 'catalog_link'
                                        assign collection_list_links = childlink.links | where: 'type', 'collections_link'
                                        assign collection_links = childlink.links | where: 'type', 'collection_link'
                                        if catalog_links.size > 0 or collection_list_links.size > 0 or collection_links.size > 0
                                          assign render_link_image = true
                                        endif
                                      endif
                                    %}
                                    <ul
                                      class="menu-drawer__menu menu-drawer__menu--grandchildlist details-content{% if render_link_image %} menu-drawer__menu--grid{% endif %}"
                                      role="list"
                                      tabindex="-1"
                                    >
                                      {%- for grandchildlink in childlink.links -%}
                                        <li
                                          class="menu-drawer__list-item"
                                          style="--menu-drawer-animation-index: {{ forloop.index }};"
                                        >
                                          <a
                                            id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}-{{ grandchildlink.handle }}"
                                            href="{{ grandchildlink.url }}"
                                            class="menu-drawer__menu-item menu-drawer__menu-item--child focus-inset{% if grandchildlink.current %} menu-drawer__menu-item--active{% endif %}"
                                            {% if grandchildlink.current %}
                                              aria-current="page"
                                            {% endif %}
                                          >
                                            {% if render_link_image %}
                                              {% render 'link-featured-image',
                                                link: grandchildlink,
                                                class: 'menu-drawer__link-image',
                                                sizes: 'auto, 400px'
                                              %}
                                            {% endif %}
                                            <span class="menu-drawer__menu-item-text wrap-text">
                                              {{- grandchildlink.title | escape -}}
                                            </span>
                                          </a>
                                        </li>
                                      {%- endfor -%}
                                    </ul>
                                  {%- endif -%}
                                {%- endif -%}
                              {%- else -%}
                                {% liquid
                                  assign accordion_state = ''
                                  if first_accordion_open == false and block_settings.drawer_accordion and block_settings.drawer_accordion_expand_first
                                    assign first_accordion_open = true
                                    assign accordion_state = 'open'
                                  endif
                                %}
                                {% if block_settings.drawer_accordion %}
                                  {%- comment -%}
                                    Accordion for links with children, in menus with 3 levels of links
                                  {%- endcomment -%}
                                  <accordion-custom>
                                    <details
                                      id="Details-menu-drawer-{{ link.handle }}-{{ childlink.handle }}"
                                      {{ accordion_state }}
                                    >
                                      <summary
                                        id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}"
                                        class="menu-drawer__menu-item menu-drawer__menu-item--parent focus-inset"
                                      >
                                        <span class="menu-drawer__menu-item-text wrap-text">
                                          {{- childlink.title | escape -}}
                                        </span>
                                        <span class="svg-wrapper icon-plus">
                                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <g clip-path="url(#clip0_4030_5779)">
                                              <path d="M19.5 9L12 16.5L4.5 9" stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                              <path d="M19.5 9L12 16.5L4.5 9" stroke="black" stroke-opacity="0.2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </g>
                                            <defs>
                                              <clipPath id="clip0_4030_5779">
                                                <rect width="24" height="24" fill="white" transform="matrix(0 1 -1 0 24 0)"/>
                                              </clipPath>
                                            </defs>
                                          </svg>
                                        </span>
                                      </summary>
                                      {% liquid
                                        assign render_link_image = false
                                        if block_settings.menu_style == 'collection_images'
                                          assign catalog_links = childlink.links | where: 'type', 'catalog_link'
                                          assign collection_list_links = childlink.links | where: 'type', 'collections_link'
                                          assign collection_links = childlink.links | where: 'type', 'collection_link'
                                          if catalog_links.size > 0 or collection_list_links.size > 0 or collection_links.size > 0
                                            assign render_link_image = true
                                          endif
                                        endif
                                      %}
                                      {% if collection != blank %}
                                        {% if collection.featured_image != blank %}
                                          <img src="{{ collection.featured_image | img_url: 'master' }}" width="100%" height="100%" alt="{{ collection.title | escape }}" class="header-drawer-img">
                                        {% else %}
                                          {% assign firstimage = collection.products.first %}
                                          <img src="{{ firstimage.featured_image | img_url: 'master' }}" width="100%" height="100%" alt="{{ firstimage.title | escape }}" class="header-drawer-img">
                                        {% endif %}
                                        <ul
                                          class="menu-drawer__menu menu-drawer__menu--grandchildlist details-content{% if render_link_image %} menu-drawer__menu--grid{% endif %}"
                                          role="list"
                                          tabindex="-1"
                                        >
                                          {%- for grandchildlink in childlink.links -%}
                                            <li
                                              class="menu-drawer__list-item"
                                              style="--menu-drawer-animation-index: {{ forloop.index }};"
                                            >
                                              <a
                                                id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}-{{ grandchildlink.handle }}"
                                                href="{{ grandchildlink.url }}"
                                                class="menu-drawer__menu-item menu-drawer__menu-item--child focus-inset{% if grandchildlink.current %} menu-drawer__menu-item--active{% endif %}"
                                                {% if grandchildlink.current %}
                                                  aria-current="page"
                                                {% endif %}
                                              >
                                                {% if render_link_image %}
                                                  {% render 'link-featured-image',
                                                    link: grandchildlink,
                                                    class: 'menu-drawer__link-image',
                                                    sizes: 'auto, 400px'
                                                  %}
                                                {% endif %}
                                                <span class="menu-drawer__menu-item-text wrap-text">
                                                  {{- grandchildlink.title | escape -}}
                                                </span>
                                              </a>
                                            </li>
                                          {%- endfor -%}
                                        </ul>
                                      {% endif %}
                                    </details>
                                  </accordion-custom>
                                {% else %}
                                  {%- comment -%}
                                    Flat menus for links with children, in menus with 3 levels of links
                                  {%- endcomment -%}
                                  <a
                                    id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}"
                                    href="{{ childlink.url }}"
                                    class="menu-drawer__menu-item menu-drawer__menu-item--parent focus-inset{% if childlink.current %} menu-drawer__menu-item--active{% endif %}"
                                  >
                                    <span class="menu-drawer__menu-item-text wrap-text">
                                      {{- childlink.title | escape -}}
                                    </span>
                                  </a>
                                  {% liquid
                                    assign render_link_image = false
                                    if block_settings.menu_style == 'collection_images'
                                      assign catalog_links = childlink.links | where: 'type', 'catalog_link'
                                      assign collection_list_links = childlink.links | where: 'type', 'collections_link'
                                      assign collection_links = childlink.links | where: 'type', 'collection_link'
                                      if catalog_links.size > 0 or collection_list_links.size > 0 or collection_links.size > 0
                                        assign render_link_image = true
                                      endif
                                    endif
                                  %}
                                  <ul
                                    class="menu-drawer__menu menu-drawer__menu--grandchildlist details-content{% if render_link_image %} menu-drawer__menu--grid{% endif %}"
                                    role="list"
                                    tabindex="-1"
                                  >
                                    {%- for grandchildlink in childlink.links -%}
                                      <li
                                        class="menu-drawer__list-item"
                                        style="--menu-drawer-animation-index: {{ forloop.index }};"
                                      >
                                        <a
                                          id="HeaderDrawer-{{ link.handle }}-{{ childlink.handle }}-{{ grandchildlink.handle }}"
                                          href="{{ grandchildlink.url }}"
                                          class="menu-drawer__menu-item menu-drawer__menu-item--child focus-inset{% if grandchildlink.current %} menu-drawer__menu-item--active{% endif %}"
                                          {% if grandchildlink.current %}
                                            aria-current="page"
                                          {% endif %}
                                        >
                                          {% if render_link_image %}
                                            {% render 'link-featured-image',
                                              link: grandchildlink,
                                              class: 'menu-drawer__link-image',
                                              sizes: 'auto, 400px'
                                            %}
                                          {% endif %}
                                          <span class="menu-drawer__menu-item-text wrap-text">
                                            {{- grandchildlink.title | escape -}}
                                          </span>
                                        </a>
                                      </li>
                                    {%- endfor -%}
                                  </ul>
                                {%- endif -%}
                              {% endif %}
                            </li>
                          {%- endfor -%}
                        </ul>
                        <div class="header-drawer-closediv">
                          <span class="header-drawer-closebtn" aria-expanded="true" on:click="header-drawer/back" aria-label="{{ 'actions.back' | t }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                              <g clip-path="url(#clip0_4030_5828)">
                                <path d="M16.875 10H3.125" stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M16.875 10H3.125" stroke="black" stroke-opacity="0.2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M8.75 4.375L3.125 10L8.75 15.625" stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M8.75 4.375L3.125 10L8.75 15.625" stroke="black" stroke-opacity="0.2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                              </g>
                              <defs>
                                <clipPath id="clip0_4030_5828">
                                  <rect width="20" height="20" fill="white"/>
                                </clipPath>
                              </defs>
                            </svg>
                            <span>GO BACK</span>
                          </span>
                        </div>
                      </div>
                    </div>
                  </details>
                {%- else -%}
                  <a
                    id="HeaderDrawer-{{ link.handle }}"
                    href="{{ link.url }}"
                    class="menu-drawer__menu-item menu-drawer__menu-item--mainlist menu-drawer__animated-element focus-inset{% if link.current %} menu-drawer__menu-item--active{% endif %}"
                    {% if link.current %}
                      aria-current="page"
                    {% endif %}
                  >
                    <span class="menu-drawer__menu-item-text wrap-text">{{ link.title | escape }}</span>
                  </a>
                {%- endif -%} {% endcomment %}
              </li>
            {% endif %}
          {%- endfor -%}
        </ul>
      </nav>
      <div
        class="menu-drawer__utility-links menu-drawer__animated-element"
        style="--menu-drawer-animation-index: {{ linklist.links.size }};"
      >
        {% liquid
          assign show_language = section.settings.show_language
          if localization.available_languages.size <= 1
            assign show_language = false
          endif

          assign show_country = section.settings.show_country
          if localization.available_countries.size <= 1
            assign show_country = false
          endif
        %}
        {% if data_header_drawer_type == 'mobile-drawer' and show_country or show_language %}
          {% render 'drawer-localization',
            show_country: show_country,
            show_language: show_language,
            country_style: section.settings.country_selector_style
          %}
        {%- endif -%}
      </div>

      <div class="header-drawer-closediv">
        <span class="header-drawer-closebtn" aria-label="{{ 'actions.close' | t }}" on:click="/close">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <g clip-path="url(#clip0_4030_5828)">
              <path d="M16.875 10H3.125" stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M16.875 10H3.125" stroke="black" stroke-opacity="0.2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8.75 4.375L3.125 10L8.75 15.625" stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8.75 4.375L3.125 10L8.75 15.625" stroke="black" stroke-opacity="0.2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </g>
            <defs>
              <clipPath id="clip0_4030_5828">
                <rect width="20" height="20" fill="white"/>
              </clipPath>
            </defs>
          </svg>
          <span>GO BACK</span>
        </span>
      </div>
    </div>
    <div
      class="menu-drawer__backdrop"
      on:click="header-drawer/close"
    ></div>
  </details>
</header-drawer>

<script>
  {% comment %} setTimeout(() => {
    const headerCategorys = document.querySelectorAll('.header-category-div');
    if(headerCategorys.length > 0) {
      headerCategorys.forEach(headerCategory => {
        headerCategory.style.maxHeight = (headerCategory.scrollHeight + 18) + 'px';
      })
    }
    console.log(headerCategorys)
  }, 4000) {% endcomment %}

  const headerCategoryOpen = (num) => {
    const headerCategory = document.querySelector(`.header-category-div-${num}`);
    const menuitem = document.getElementById("header_drawer_padding");
    const isOpen = headerCategory.classList.contains('open');

    if (!isOpen) {
      headerCategory.classList.add('open');
      headerCategory.style.maxHeight = headerCategory.scrollHeight + 'px';
      if(num == 2 && menuitem) {
        menuitem.style.paddingTop = "20px";
      }
    }
    else {
      headerCategory.classList.remove('open');
      headerCategory.style.maxHeight = 0;
      if(num == 2 && menuitem) {
        menuitem.style.paddingTop = 0;
      }
    }
  }
</script>

{% style %}
  .header-category-li {
    padding-left: 0;
  }

  /* Category Header (KNIVES, ACCESSORIES) - Most prominent */
  .header-category {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 50px;
    font-family: "Sen";
    font-weight: 700;
    font-size: 18px;
    color: white;
    letter-spacing: 0.5px;
  }

  .header-category-div {
    display: flex;
    flex-wrap: wrap;
    row-gap: 16px;
    column-gap: 10px;
    overflow: hidden;
    /* max-height: 0; */
    transition: max-height 0.5s ease;
  }

  .header-category-div a {
    width: calc(50% - 5px);
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  /* Series Links (Supreme, Retro, etc.) - Secondary, softer */
  .header-category-div h4 {
    font-family: "Sen";
    font-weight: 500;
    font-size: 14px;
    text-align: center;
    color: rgba(255, 255, 255, 0.85);
    text-transform: uppercase;
    letter-spacing: 0.3px;
  }

  /* Compare Knives - Primary CTA */
  .header-compare {
    background-color: rgba(255, 255, 255, 0.08);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
    padding: 12px 24px;
    width: fit-content !important;
    margin: 12px auto 15px;
    font-family: "Sen";
    font-weight: 600;
    font-size: 13px;
    letter-spacing: 0.5px;
    border-radius: 4px;
    transition: all 0.2s ease;
  }

  .header-compare:hover {
    border-color: white;
    background-color: rgba(255, 255, 255, 0.12);
  }

  /* CTA Buttons - Distinct action items */
  .header-view-all {
    background-color: rgba(255, 255, 255, 0.08);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
    padding: 12px 24px;
    width: fit-content !important;
    margin: 12px auto 15px;
    font-family: "Sen";
    font-weight: 600;
    font-size: 13px;
    text-align: center;
    letter-spacing: 0.5px;
    border-radius: 4px;
    transition: all 0.2s ease;
    display: block;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .header-view-all:hover {
    border-color: white;
    background-color: rgba(255, 255, 255, 0.05);
  }

  .menu-img-mobile {
    position: relative;
  }

  .menu-img-mobile .price-off {
    position: absolute;
    background-color: #ff0004;
    padding: 2px 7px;
    border-radius: 20px;
    top: 5px;
    left: 5px;
    font-size: 12px;
    color: white;
  }
{% endstyle %}

{% stylesheet %}
  .header__icon--menu {
    position: initial;
  }

  @media screen and (min-width: 750px) {
    .header--desktop header-menu + .header__drawer header-drawer {
      display: none;
    }
  }

  .menu-drawer-container .header__icon--summary {
    color: var(--color-foreground);
    display: flex;
    justify-content: center;
    align-items: center;
    padding: var(--padding-lg);
  }

  .header__icon--summary .header-drawer-icon {
    margin: auto;
    width: auto;
    height: 20px;
    gap: 20px;
  }

  .header__icon--summary .header-drawer-icon img {
    width: 20px;
    height: 20px;
  }

  .header__icon--summary .header-drawer-icon span {
    font-size: 22px;
    line-height: 150%;
    font-weight: 500;
  }

  .header__drawer {
    display: flex;
    min-height: 60px;
    align-items: center;

    @media screen and (min-width: 750px) {
      min-height: 0;
    }
  }

  .header--compact .header__drawer {
    min-height: var(--minimum-touch-target);
  }

  .menu-drawer__navigation {
    padding: 0;

    @media screen and (min-width: 750px) {
      margin-top: var(--drawer-header-desktop-top);
    }
  }

  details:not([open]) .header__icon--menu .header-drawer-icon--close {
    display: none;
  }

  details[open] .header__icon--menu .header-drawer-icon--close {
    @media screen and (min-width: 750px) {
      display: none;
    }
  }

  details[open] .header__icon--menu .header-drawer-icon--open {
    display: none;

    @media screen and (min-width: 750px) {
      display: flex;
    }
  }

  .menu-drawer {
    position: fixed;
    transform: translateX(-100%);
    visibility: hidden;
    height: var(--drawer-height);
    width: var(--drawer-width);
    max-width: var(--drawer-max-width);
    z-index: var(--layer-menu-drawer);
    left: 0;
    top: 0;
    padding: 0;
    background-color: var(--color-background);
    overflow: auto;
    display: flex;
    border-right: var(--style-border-drawer);
    box-shadow: var(--shadow-drawer);
    flex-direction: column;

    @media screen and (min-width: 750px) {
      width: 25rem;
    }

    .header__drawer--desktop & {
      height: 100vh;
    }
  }

  .menu-drawer:has(details[open]) {
    overflow: initial;
  }

  .menu-drawer__backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100dvh;
    backdrop-filter: brightness(0.75);
    z-index: var(--layer-heightened);
    opacity: 0;
    transition: opacity var(--drawer-animation-speed) ease;

    .menu-open & {
      opacity: 1;
    }
  }

  .menu-drawer,
  details[open] > .menu-drawer__submenu {
    transition: transform var(--drawer-animation-speed) ease, visibility var(--drawer-animation-speed) ease,
      opacity var(--drawer-animation-speed) ease;
  }

  .menu-open > .menu-drawer,
  .menu-open > .menu-drawer__submenu:not(.menu-drawer__menu--childlist) {
    transform: translateX(0);
    visibility: visible;
    opacity: 1;
    background-color: black;
    color: white;
    width: 100%;
    display: flex;
    flex-direction: column;
    will-change: transform;
  }

  .menu-drawer__inner-container {
    position: relative;
    height: 100%;
  }

  .menu-drawer__navigation-container {
    display: grid;
    grid-template-rows: 1fr auto;
    align-content: space-between;
    overflow-y: auto;
    height: 100%;
  }

  .menu-drawer__inner-submenu {
    display: flex;
    flex-direction: column;
    height: calc(100% - 100px);
    overflow-y: auto;

    @media screen and (min-width: 750px) {
      margin-top: var(--drawer-header-desktop-top);
    }
  }

  .menu-drawer__nav-buttons {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .menu-drawer__menu {
    --menu-drawer-inline-padding: calc(var(--padding-sm) + 7px);

    list-style: none;
    padding-inline: var(--drawer-padding);
    margin-inline: 0;
    margin-block-start: 0;
  }

  .menu-drawer__menu--grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--padding-sm);
    padding-inline-end: var(--menu-drawer-inline-padding);
    padding-block-start: var(--padding-xs);
  }

  .menu-drawer__menu--childlist:not(.menu-drawer__menu--grid) {
    flex-grow: 1;
  }

  .menu-drawer__menu.has-submenu,
  .menu-drawer__menu--childlist:not(:has(.menu-drawer__animated-element)) {
    padding: 0;
    margin: 0 24px;
  }

  /* Removed left border (vertical line) for cleaner flat menu */

  .menu-drawer__list-item--divider {
    border-block-end: 1px solid var(--color-border);
  }

  .menu-drawer__list-item--deep:not(.menu-drawer__list-item--divider) .menu-drawer__menu {
    margin-block-start: -0.3rem;
  }

  .menu-drawer__list-item--flat.menu-drawer__list-item--divider .menu-drawer__menu {
    margin-block-start: -0.4rem;
  }

  .menu-drawer__menu-container--divider {
    border-block-end: 1px solid var(--color-border);
  }

  .menu-drawer__menu > .menu-drawer__list-item {
    display: flex;
    min-height: calc(2 * var(--padding-lg) + var(--icon-size-xs));
  }

  .menu-drawer__list-item--deep .menu-drawer__list-item,
  .menu-drawer__list-item--flat .menu-drawer__list-item {
    min-height: auto;
  }

  .menu-drawer__menu .menu-drawer__list-item--flat {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    margin-block-end: var(--margin-md);
  }

  .menu-drawer__menu--childlist .menu-drawer__list-item--flat {
    margin-block-end: var(--margin-sm);

    @media screen and (min-width: 750px) {
      margin-block-end: var(--margin-lg);
    }
  }

  .menu-drawer__menu--childlist .menu-drawer__list-item--flat.menu-drawer__list-item--divider {
    margin-block-end: 0;
  }

  .menu-drawer__list-item--flat .menu-drawer__menu--childlist {
    width: 100%;
    padding-inline-start: 0;
  }

  .menu-drawer-container[open] .menu-drawer__animated-element {
    animation: menu-drawer-nav-open var(--drawer-animation-speed) ease-in-out;
    animation-delay: calc(var(--drawer-animation-speed) + (var(--menu-drawer-animation-index) - 1) * 0.1s);
    animation-fill-mode: backwards;
    color: var(--Accent, #fff);
    font-family: var(--Primary-Font-Family-Heading, Sen);
    font-size: 18px;
    font-style: normal;
    font-weight: var(--Primary-Font-Weight-Regular, 400);
    line-height: 150%; /* 27px */
    letter-spacing: 0.18px;
    padding-left: 0px !important;
  }

  .menu-drawer__menu details,
  .menu-drawer__menu-item,
  .menu-drawer__menu accordion-custom {
    width: 100%;
  }

  .menu-drawer__list-item--divider .menu-drawer__menu-item:not(.menu-drawer__menu-item--child) {
    min-height: calc(2 * var(--padding-lg) + var(--icon-size-xs));
  }

  .menu-drawer__menu-item--mainlist {
    min-height: calc(2 * var(--padding-lg) + var(--icon-size-xs));
    font-family: var(--menu-top-level-font-family);
    font-style: var(--menu-top-level-font-style);
    font-weight: var(--menu-top-level-font-weight);
    font-size: var(--menu-top-level-font-size);
    line-height: var(--menu-top-level-font-line-height);
    text-transform: var(--menu-top-level-font-case);
    color: var(--menu-top-level-font-color);
    justify-content: space-between;

    &:hover {
      color: var(--menu-top-level-font-color);
    }
  }

  .menu-drawer__menu-item--parent {
    font-family: var(--menu-parent-font-family);
    font-style: var(--menu-parent-font-style);
    font-weight: var(--menu-parent-font-weight);
    font-size: var(--menu-parent-font-size);
    line-height: var(--menu-parent-font-line-height);
    text-transform: var(--menu-parent-font-case);
    color: var(--menu-parent-font-color);

    &:hover {
      color: var(--menu-parent-font-color);
    }
  }

  .menu-drawer__menu-item--child {
    font-family: var(--menu-child-font-family);
    font-style: var(--menu-child-font-style);
    font-weight: var(--menu-child-font-weight);
    font-size: var(--menu-child-font-size);
    line-height: var(--menu-child-font-line-height);
    text-transform: var(--menu-child-font-case);
    color: var(--menu-child-font-color);

    &:hover {
      color: var(--menu-child-font-color);
    }
  }

  .menu-drawer__menu--childlist summary.menu-drawer__menu-item {
    display: flex;
    width: 100%;
    padding-inline-end: 0;
  }

  .menu-drawer__list-item--deep .menu-drawer__menu,
  .menu-drawer__menu--grandchildlist {
    padding-inline-start: 0;
  }

  .menu-drawer__list-item--deep .menu-drawer__menu {
    padding-block-end: 0.5rem;
  }

  .menu-drawer__list-item--deep.menu-drawer__list-item--divider .menu-drawer__menu {
    padding-block-end: 0.3rem;
  }

  .menu-drawer__list-item--flat.menu-drawer__list-item--divider .menu-drawer__menu--grandchildlist {
    padding-block-end: 0.5rem;
  }

  .menu-drawer__menu-item {
    display: flex;
    padding: var(--padding-2xs) 0;
    position: relative;
    text-decoration: none;
    justify-content: space-between;
    align-items: center;
  }

  .menu-drawer__menu-item:has(> .menu-drawer__link-image) {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
    row-gap: var(--padding-3xs);
    padding: 0;
  }

  .menu-drawer__link-image {
    width: 100%;
    position: relative;
    aspect-ratio: 16 / 9;
    object-fit: cover;
  }

  /* Fix alignment for collection image mode links without images in drawer */

  /* Target menu items in grids that have images */
  .menu-drawer__menu--grid:has(.menu-drawer__link-image) .menu-drawer__menu-item:not(:has(> .menu-drawer__link-image)) {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
    row-gap: var(--padding-3xs);
    padding: 0;
  }

  .menu-drawer__menu--grid:has(.menu-drawer__link-image)
    .menu-drawer__menu-item:not(:has(> .menu-drawer__link-image))::before {
    content: '';
    display: block;
    width: 100%;
    aspect-ratio: 16 / 9;
    background-color: var(--color-foreground-muted);
    opacity: 0.1;
    border-radius: var(--menu-image-border-radius);
  }

  .menu-drawer__close-button {
    position: relative;
    right: auto;
    top: auto;
    width: fit-content;
    height: fit-content;
    padding: var(--padding-lg);
    will-change: transform;
  }

  .menu-drawer__back-button {
    display: flex;
    width: 100%;
    border: none;
    align-items: center;
    color: var(--color-foreground);
    background-color: transparent;
    text-align: left;
    text-decoration: none;
    white-space: nowrap;
    overflow-x: hidden;
    line-height: 1.2;
    box-shadow: none;
    padding: 24px;
  }

  .menu-drawer__menu-item-text {
    overflow: hidden;
    text-overflow: ellipsis;
    font-family: "Sen";
    font-weight: 500;
    font-size: 16px;
    color: #fff;
    white-space: nowrap;
  }

  /** Styles when the country selector is hidden */
  .menu-drawer .language-selector:not(.menu-drawer__submenu *) {
    width: fit-content;
    padding-inline-start: 0;

    .localization-form__select {
      text-align: left;
    }
  }

  .menu-drawer__menu-item > .svg-wrapper {
    width: fit-content;
    height: fit-content;
    margin: 0;
    padding-block: var(--padding-lg);
    padding-inline-start: var(--padding-xl);
    flex-shrink: 0;
  }

  .menu-drawer__list-item--divider .menu-drawer__menu-item > .svg-wrapper {
    padding-block: var(--padding-md);
  }

  .menu-drawer svg {
    width: var(--icon-size-xs);
    height: var(--icon-size-xs);
  }

  .menu-drawer__submenu {
    position: absolute;
    width: 100%;
    top: 0;
    height: 100dvh;
    left: 0;
    background-color: var(--color-background);
    z-index: var(--layer-flat);
    transform: translateX(-5%);
    visibility: hidden;
    overflow-y: auto;
    opacity: 0;
  }

  .menu-drawer__back-button > .svg-wrapper {
    margin: 0 var(--padding-md);
    width: var(--icon-size-xs);
    height: var(--icon-size-xs);
  }

  .menu-drawer__utility-links {
    display: flex;
    flex-direction: column;
    padding: 0;
    margin-block: auto var(--padding-sm);
    margin-inline-start: var(--padding-xl);
    background-color: rgb(var(--color-foreground) 0.03);
  }

  .menu-drawer__account {
    display: inline-flex;
    align-items: center;
    gap: var(--gap-xs);
    text-decoration: none;
    height: 44px;
    font-size: 1.4rem;
    color: rgb(var(--color-foreground));
  }

  .menu-drawer__account svg {
    height: var(--icon-size-sm);
    width: var(--icon-size-sm);
  }

  .menu-drawer__account shop-user-avatar {
    --shop-avatar-size: 2.4rem;

    margin-right: 0.55rem;
    margin-left: -0.45rem;
  }

  .menu-drawer__link-image,
  .menu-drawer__featured-product-image,
  .menu-drawer__featured-collection-image,
  .menu-drawer__featured-collection-link::before {
    border-radius: var(--menu-image-border-radius);
  }

  @keyframes menu-drawer-nav-open {
    0% {
      visibility: hidden;
      opacity: 0;
      transform: translateX(-0.5rem);
    }

    100% {
      visibility: visible;
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes menu-drawer-subnav-open {
    0% {
      visibility: visible;
      opacity: 1;
      transform: translateX(0);
    }

    100% {
      visibility: hidden;
      opacity: 0;
      transform: translateX(-1rem);
    }
  }

  .header-drawer-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 24px;
  }

  .header-drawer-header .menu-drawer__close-button {
    padding: 0;
  }

  .header-drawer-title {
    padding: 24px;
    font-family: "Sen";
    font-weight: 500;
    font-size: 16px;
    color: #828282;
    line-height: 1;
  }

  .header-drawer-close {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .header-drawer-close span {
    font-family: "Sen";
    font-weight: 400;
    font-size: 16px;
    color: #fff;
  }

  .header-drawer-action {
    display: flex;
    align-items: center;
  }

  .menu-drawer__menu-item--mainlist {
    padding: 0;
    padding-left: 24px;
  }

  .menu-drawer__menu-item {
    padding: 0;
    padding-left: 24px;
  }

  .menu-drawer__list-item--deep {
    height: auto !important;
  }

  .menu-drawer__menu.menu-drawer__menu--grandchildlist.details-content {
    margin: 0 24px;
    border-left: 1px solid #828282;
  }

  .header-drawer-img {
    width: calc(100% - 24px);
    margin-left: 24px;
    padding: 16px 0 32px;
  }

  .header-drawer-closediv {
    width: 100%;
    padding: 12px 24px 32px;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    background-color: black;
  }

  .header-drawer-closebtn {
    padding: 6px 0;
    display: flex;
    gap: 12px;
    font-family: "Sen";
    font-weight: 600;
    font-size: 16px;
    color: #828282;
    align-items: center;
    width: fit-content;
    margin: auto;
    border-bottom: 1px solid #828282;
  }
{% endstylesheet %}
