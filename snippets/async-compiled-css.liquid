{% comment %}
  Make Shopify compiled styles.css non-render-blocking
  Uses media="print" trick to defer CSS loading while critical CSS handles above-fold content
{% endcomment %}
<script>
(function() {
  // Find all stylesheet links
  var links = document.querySelectorAll('link[rel="stylesheet"]');
  links.forEach(function(link) {
    var href = link.href || '';
    // Target Shopify compiled CSS
    if (href.indexOf('compiled_assets/styles.css') !== -1) {
      // Already has onload? Skip
      if (link.onload) return;
      // Change to print media (non-blocking), then switch to all on load
      link.media = 'print';
      link.onload = function() {
        this.media = 'all';
        this.onload = null;
      };
    }
  });
})();
</script>
<noscript>
  <style>
    /* Fallback: if JS disabled, compiled CSS loads normally via content_for_header */
  </style>
</noscript>
